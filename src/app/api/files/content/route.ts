import { NextRequest, NextResponse } from 'next/server';

// Sample file contents for text files
const mockFileContents: Record<string, string> = {
  '102': 'Estas são minhas notas importantes.\nLembrar de comprar leite.\nMarcar consulta no dentista.',
  '1201': 'Arroz\nFeijão\nLeite\nFrutas\nLegumes\nPão',
  '11102': '# Requisitos do Projeto\n\n## Funcionalidades\n\n- Upload de arquivos\n- Visualização de documentos\n- Gerenciamento de pastas\n\n## Tecnologias\n\n- Next.js\n- TypeScript\n- PrimeReact',
  '11112': '# Projeto de Desenvolvimento\n\n## Descrição\nEste é um projeto de desenvolvimento de software para gerenciamento de arquivos utilizando tecnologias modernas como Next.js e PrimeReact.\n\n## Como executar\n\n```bash\n# Instalar dependências\nnpm install\n\n# Iniciar servidor de desenvolvimento\nnpm run dev\n```\n\n## Estrutura do projeto\n\n- `/app` - Código principal da aplicação\n- `/api` - Endpoints da API\n- `/components` - Componentes reutilizáveis\n\n## Contribuições\n\nPara contribuir com este projeto, por favor siga as diretrizes de desenvolvimento no documento anexo.'
};

// For image "data" we'll use placeholder data URLs
const mockImageContents: Record<string, string> = {
  '201': 'data:image/jpeg;base64,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',
  '2101': 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAoHBwkHBgoJCAkLCwoMDxkQDw4ODx4WFxIZJCAmJSMgIyIoLTkwKCo2KyIjMkQyNjs9QEBAJjBGS0U+Sjk/QD3/2wBDAQsLCw8NDx0QEB09KSMpPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3/wAARCAAyADIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDy2iiirMgooooAKKKKACiiigAooooAKKKKACiiigAooooAKKTI9aXNABS4pM0ZoAdSZozTakYtFJS0AFFJmlzQAUZpKM0ALRkUlHNABRQO1FIYUZoooAKKKKAA9KKKKYH/2Q==',
  '2102': 'data:image/jpeg;base64,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',
  '2201': 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAoHBwkHBgoJCAkLCwoMDxkQDw4ODx4WFxIZJCAmJSMgIyIoLTkwKCo2KyIjMkQyNjs9QEBAJjBGS0U+Sjk/QD3/2wBDAQsLCw8NDx0QEB09KSMpPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3/wAARCAAyADIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDyOPTBdajBYwzGOSZwgkA5XPXFdHqfwx1nTYDMxtbuNRkyW0weQD3AJB/DFcXbzNbzxzL96Nww/A5r6FHi9YvCt74hmiMpgiQRW46SvjO0ew5JrgxFSUUrHfh6cXK7PMND8Ea5rOpW1nFZTWyTtgzXERjjjHdmBwcDsMk+lecapYzaVql3YTkGW3laJiB3ByD+PSvYNX8WarrHii3sI8WdrdQsY4kfLFSQcuf4jlTx04HArznxxZi08W3zqP3dzsuFPrv+YH/x6lh6s3K7DERilZHMRrukVfU4r2iVpLj9laS7kO5v7QgiLn2EjfyzXicXMiDGea9pMG/9mfTZd5wt/HGF7DKSf41eKbcU2ThUrNHlEOna14o8W2egadbubiaUbEB2qq55Y+gAyfwr6c8N+CNB8JWMdvZWseGQCe5K5lmPqzHJ/LFafw/8OWfhvw1bpFEiXlxGs11JgZcsMgZ9hnApvinWzpGkukJH2u4PlxZ7Z/iP0FYUVKpG9TZGtdxp6U9WcteftCeEtDu7iy1GK4RomKZWNSUbuDk8ivOviF8W7b4g+GbvS7GymhjkYSK0zKeoIxhc/wAXvXmk9tfancNPNJJO7nLO5ySfqammtZtKktpdimZmKWwOOd2DuPtwAPqa6qWGjGfO9zjq4mUo8qKkFzJbPuQ9eoPQivZtF8cXFx8KNQ8P3cxaewnWe2J6pGxAZPYAkEfWvFrexaMh7jAYfdQHOPqf6VsQxyeU+0E8elaVoqasY05NbHvH/C23iLQ7gJ4mskmsmP8Ax92K4ZP99eQR7jivbNB1ix1/RrXU9OmEtrcJuRh1HqD6EHIPsa+L5nYEEcc16n+z94mks/EUnh+4kJt9QBkhGeLdOc/QgfmRXBUw8U7o7YYia0Z6L8Qpgby1j7IjMf5VjeF9VstJ1dbrUbaS5gKmMxo4UsT3GehrR8bSE+JHUHhIYwB+Nc/Dw3NdtNKMDiqXlO7PUxr3hxeH1yxj/wB44/nVR/Eug3QIl0+0kPo0pYfoa4JuBWfOx3Hmta6CmkegeILLTtVs4ZdLtbaG4ibdH5MhYFT9T3Fc3pehO74I69M1meG53gu9hbh+PzrsbRvL2t6VnGVpWZUleLsf/9k='
};

export async function GET(request: NextRequest) {
  // Simulate delay to mimic real-world API
  await new Promise(resolve => setTimeout(resolve, 300));
  
  const searchParams = request.nextUrl.searchParams;
  const fileId = searchParams.get('fileId');
  
  if (!fileId) {
    return NextResponse.json({ error: 'File ID is required' }, { status: 400 });
  }
  
  // For text files, return the content
  if (mockFileContents[fileId]) {
    return new Response(mockFileContents[fileId], {
      headers: {
        'Content-Type': 'text/plain',
      },
    });
  }
  
  // For images, return the image data (in a real app, this would be the actual image)
  if (mockImageContents[fileId]) {
    const imageData = mockImageContents[fileId];
    const contentType = imageData.substring(5, imageData.indexOf(';'));
    
    return new Response(imageData, {
      headers: {
        'Content-Type': contentType,
      },
    });
  }
  
  // For other file types, we'd handle accordingly
  return NextResponse.json({ error: 'File content not available' }, { status: 404 });
}